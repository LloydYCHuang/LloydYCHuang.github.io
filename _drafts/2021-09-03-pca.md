---
layout: default
categories: Statistic
title:  "Principal component analysis (主成分分析)"
---  
## Principal component analysis (主成分分析)   
終於也到了這個我最期待的單元了，主成分分析是一個環境科學上相當常用，但入門難度相對高的統計方法，我們實驗室的新學生很常都在主成分分析上碰到瓶頸，這幾天我也是在教實驗室的人有關主成分分析，因此起了這個念頭，再次整理一下主成分分析的原理。這篇文章不會包含程式碼，改天再寫一篇將R的程式碼貼上來 (事實上相當簡單)，我會先介紹主成分分析大致上的應用方式、原理，最後才會講到其數學的寫法，所以如果對數學有恐懼的人可以看前半段就好，那就開始吧！  
  
*Time goes on. So whatever you're going to do, do it. Do it now. Dont wait.   
&mdash;Robert De Niro*   
  
### 何謂PCA   
主成分分析 (principal component analysis, PCA) 是一種降維度 (dimensionality reduction) 的演算法，因此我們可以先從降維度這個詞開始講起。維度 (dimension) 代表我們用於表示一個座標點所需要用的參數數目，舉例來說，我們常見的XY散布圖就是由兩個維度 (X跟Y) 所組成的平面，一個維度就是一條線，兩個維度組成一個面，三個維度則可以組成立體空間，物理學上，我們是生活在一個三維空間中，還有一個單向的第四維是時間。  
  
有了維度的概念，就可以看到我們平時處理的資料，例如我們要測量土壤的八大重金屬，這代表**每一個樣品我們都測量了八個項目**，也就是說這組資料有八個維度，但由於八個維度太難編資料了，我決定把情況換成學生的考試成績。假設現在每個學生都考了三門期末考，期末考的科目包含數學、科學還有英文，然後有6位學生參加考試，那麼虛構的考試結果可能如下：  
| Student | Math | Science | English |  
| :---: | :---: | :---: | :---: |
| Andy | 98 | 97 | 52 | 
| Bob | 48 | 58 | 90 |
| Caleb | 44 | 65 | 99 |
| David | 92 | 96 | 63 |
| Ethan | 42 | 57 | 86 |
| Frank | 70 | 80 | 70 |
{: .tablelines}  
  
這個數據是一個三維度的資料，那麼此時，我們能從這組資料裡看出什麼呢？要回答這個問題，繪圖是最好的方法，也許數字沒有什麼感覺，但在科學上圖表是非常有感覺的，我把同學的成績繪製成三維的圖來看看：  
<iframe src="https://lloydychuang.github.io/assets/pca.html" width="520" height="520" frameborder="0" scrolling="no"></iframe>  
  
從圖中就可以看到，其實同學成績的分布是有一個規律的，英文成績越高的學生 (Bob、Caleb和Ethan)，他們的數學跟科學都考比較差，相反的數學跟科學成績較高的學生 (Andy及David)，他們的英文成績較差，而Frank則是介於中間。因此我們可以說同學的成績**類似於有一個維度在控制**，這就是我們可以從這組資料中看出的事情，那麼問題來了，我們要怎麼描述這件事情？亦或者是，當維度提高到變成八大重金屬，無法繪圖的狀況下，我們怎麼看出這種隱藏的維度？  
  
沒錯，此時就是PCA派上用場的時候了，所謂的降維度即是讓多維度的資料可以更為容易的理清，不同的降維度方法有各自的原理，而PCA的原理就是**保留最大的變異**。  
  
### PCA：保留最大的變異  
這裡會開始進入有點數學的地方，不過不用緊張，真正的數學我都放在最後面了，這裡的一定看得懂，也可以去看<a href="https://www.youtube.com/watch?v=FgakZw6K1QQ" target="_blank">StatQuest的影片</a>很容易懂。  
PCA的概念
首先假設我們要看的是一個二維的圖




